{"componentChunkName":"component---src-templates-blog-post-js","path":"/Spring/SpringContainer/","result":{"data":{"site":{"siteMetadata":{"title":"Gomster","author":"Gomster","siteUrl":"https://gomster96.github.io","comment":{"disqusShortName":"","utterances":"gomster96/gomster96.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"0a9660d3-3956-5668-a7cd-3ab79c147929","excerpt":"스프링 컨테이너란? 스프링 컨테이너는 Application Context를 스프링 컨테이너라고 한다. 이전 예제에서는 AppConfig에서 직접 객체를 생성하고 DI를 했지만, 이제부터는 스프링 컨테이너를 사용한다. Spring Container는 @Configuration이 붙은 설정 정보로 구성한다. @Bean이라는 어노테이션을 통해, 해당 어노테이션이 적힌 메서드를 모두 호출해서 스프링 컨테이너에 빈을 등록한다. 위에서 말했듯이 @Configuration을 통해 Spring Container…","html":"<h1 id=\"스프링-컨테이너란\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%9E%80\" aria-label=\"스프링 컨테이너란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 컨테이너란?</h1>\n<p>스프링 컨테이너는 Application Context를 스프링 컨테이너라고 한다.</p>\n<p>이전 예제에서는 AppConfig에서 직접 객체를 생성하고 DI를 했지만, 이제부터는 스프링 컨테이너를 사용한다.</p>\n<ul>\n<li>Spring Container는 @Configuration이 붙은 설정 정보로 구성한다.</li>\n<li>@Bean이라는 어노테이션을 통해, 해당 어노테이션이 적힌 메서드를 모두 호출해서 스프링 컨테이너에 빈을 등록한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberService</span> <span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OrderService</span> <span class=\"token function\">orderService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위에서 말했듯이 @Configuration을 통해 Spring Container를 정의하고, 내부 메서드에 @Bean을 통해 스프링 컨테이너에 Bean을 등록할 수 있다.</p>\n<p>이렇게 스프링 컨테이너를 등록하면 ApplicationContext라는 인터페이스를 통해 내부의 빈을 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApplicationContextBasicFindTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">AnnotationConfigApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"빈 이름으로 조회\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이름 없이 타입으로만 조회\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//given</span>\n        <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"구체 타입으로 조회\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByName2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"빈 이름으로 조회 X\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByNameX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">NoSuchBeanDefinitionException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"xxxxx\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위에 예시는 ApplicationContext를 사용해 등록되어 있는 빈을 조회하는 테스트코드이다.</p>\n<ul>\n<li>getBean 메서드를 통해 빈을 조회할 수 있다.</li>\n<li>구현체 타입, 이름으로만 조회할 수 있다.</li>\n<li>존재하지 않는 빈을 조회한다면 NoSuchBeanDefinitionException이 발생한다.</li>\n</ul>\n<h1 id=\"스프링-컨테이너의-생성-과정\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%9D%98-%EC%83%9D%EC%84%B1-%EA%B3%BC%EC%A0%95\" aria-label=\"스프링 컨테이너의 생성 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 컨테이너의 생성 과정</h1>\n<p>스프링 컨테이너의 생성 과정은 아래 그림을 순서대로 이해한다면 쉽게 이해할 수 있다.</p>\n<h3 id=\"1-스프링-컨테이너-생성\" style=\"position:relative;\"><a href=\"#1-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%83%9D%EC%84%B1\" aria-label=\"1 스프링 컨테이너 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 스프링 컨테이너 생성</h3>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 813px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABIUlEQVQoz42SWW6DQBBEuf+PT8NNEDJGfCA2GTBgdmygk9fRWFFiOympNT1bdfViySf2fZd3uN/vMs+z3G436bpOXNeV0+kkjuNInud6zv2yLGLZtq0fwjCUKIokjmN97Pu+rmmaSlEU0jSNtG2ra1VVcr1e1a/rWn3uILcOh4Os66ofz+ezGr6xLMv07CdQg5DvQL0l/wAqTNr4KMeOx6MGG4ZBtm1TlRYONTTrM4MEMj4EQSBJksg4jpqy53lyuVz0/pfCd4SkCAmgRPgmZe4wJaRDbIjwCigxCqZpUrK+77/8adSUHwopPCnQZR6hhm7TZTpOMLqKKjMarJCZPf6jhoyE6SxkmBkHjCAQ/jWrQAkpaFmWT0fDwBC+MtQZwg8lrgOVYyQ87QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1\" title=\"1\" src=\"/static/0e590d9b4b0b631811189b0863811941/baaa6/1.png\" srcset=\"/static/0e590d9b4b0b631811189b0863811941/5a46d/1.png 300w,\n/static/0e590d9b4b0b631811189b0863811941/0a47e/1.png 600w,\n/static/0e590d9b4b0b631811189b0863811941/baaa6/1.png 813w\" sizes=\"(max-width: 813px) 100vw, 813px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<blockquote>\n<p>new AnnotationConfigApplicationContext(AppConfig.class)</p>\n</blockquote>\n<p>위에 new 를 하는 순간 컨테이너 가 생성되고, AppConfig.class를 통해 구성정보가 지정된다.</p>\n<h3 id=\"2-스프링-빈-등록\" style=\"position:relative;\"><a href=\"#2-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EB%93%B1%EB%A1%9D\" aria-label=\"2 스프링 빈 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 스프링 빈 등록</h3>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB90lEQVQoz02SWW/aUBCF/VNahRaD8QrY2AbclkQlrar+4WZRSqWGp0YqiIAQhE0Ki40FmJ3TOzd9iKVPdzyWzj0zx8Jjs4G/tRoajQam0ymC+RyBP8c8YMxf2O122O/32Gw2vJ7NZmg2m2i1Wuh2u1iv19hut/y78P1rCXnbRKHo4eKihG+XJZS/fIRXLqLoebCsHKrVKlbRCmEYYrlcIggCjEYjDtXUI+giwSu6UCQRqqpAUVVo7FQ1FXJagZxREEvEcFe5w2F/wOl04k6jKOJi/X4fi8UCh8MB9KxWKwjl8zwsQ4bjOMxlHiXPhZnXIRoikmoSMSmGq19XCKOQizz8eeDj+r7PV1Sv11FjK5tMJhzBzRfwPh5HxrRg2Q4yWQuSnIKYTDBBCbEkE/z5A/56hufJM9rtNgaDAR+RHPZ6PXQ6HS5G+2YOXWR0GVnTRDprwrUzKDpZ5BwdKTOJs8QZrivXCNY+nvpP3A2FMR6PuRDV5JiEucPSpwKUVAKapkEz0jAMA7qhQ9VVSPqLw5vKDcJNiMGwzwXIJY1MCRP0PhwOeU84/+BAVxIw0mmOY+kcyRIRl0W8efcWt5VbHgaFcjwd+fma4/HIQ6GwhM/lS/ZrsFFdB47rwv5PzrZhs50azPX973tELEFKlHZHab6GeiRGDv8BgMEHdKrS5Z0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2\" title=\"2\" src=\"/static/7f8f7be963e4030de027a8b338977992/1d69c/2.png\" srcset=\"/static/7f8f7be963e4030de027a8b338977992/5a46d/2.png 300w,\n/static/7f8f7be963e4030de027a8b338977992/0a47e/2.png 600w,\n/static/7f8f7be963e4030de027a8b338977992/1d69c/2.png 750w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<p>이후 Spring 컨테이너는 파라미터로 넘어온 클래스(AppConfig) 정보를 사용해서 스프링 빈을 등록한다.</p>\n<h3 id=\"3-스프링-빈-의존관계-설정---준비\" style=\"position:relative;\"><a href=\"#3-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84-%EC%84%A4%EC%A0%95---%EC%A4%80%EB%B9%84\" aria-label=\"3 스프링 빈 의존관계 설정   준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 스프링 빈 의존관계 설정 - 준비</h3>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 751px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACHklEQVQoz4WSzU8TQRjG92+hBSm7W2l3212KfBQUKBWD1CgHo0c/r3hFUbmKwQMXCV44NB6QgxJPbW1ImhhC4gEp1hgOJiWk0t1tS6n153QxXpnklzdPMvPM8847UqHwjZ2dr+TzeUqlEpbtYFkWtm3/p9FouFSqFY7rxxQPiuLMDru7uxS+F3AqDtVa1UW6OT3JxWgfI6NjTEzEuT4V5+pknLFYjEsjowwMDJDL5ajVanACNE6xLRurbJ3quuAP1Kwa0vDwIHKnF1WRkVUVWVRFVMV/Xmg/bV4vqVSK+kmd+Y/PSSxP8fDtA4pOEefE4dH6DNNvbnB79RZrW2tIV8aHMIIqkUgv/f19Im0vphnCJ8uuube9nUwm4xomt5I823jKUnaJUqVEpV5hJbciLprnZXqBzfwmUnRoiI6ODvSwgdHTS0jUVsJzPh9diuIaptNpmr+bnLnEFulyLIrWLRMKhQjqYXpMnQsRHTMcRPWreETLrYStYcxtzHFtOcH95D32f+27HgupFyReT3E3eYftH9tIsbFh/IqPQCBAQNPQ9aBLMNjtJvX8a7lluPp5lScfHrOYWeTAPnAN17+8Y/b9LK8+LbL3cw9pfGSQbtWHpulouk6PESBiBlBVhU5fF20ejzuUZvPslhv1hkg4HkcTaQwjTNg0CRstDHTxBC1Uv59sNku1WuWofETZLrvYjo3jiD9rW5StU314eMhfQXb0gct4frsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3\" title=\"3\" src=\"/static/d41dadc1737716acb034d75534d7745e/c483d/3.png\" srcset=\"/static/d41dadc1737716acb034d75534d7745e/5a46d/3.png 300w,\n/static/d41dadc1737716acb034d75534d7745e/0a47e/3.png 600w,\n/static/d41dadc1737716acb034d75534d7745e/c483d/3.png 751w\" sizes=\"(max-width: 751px) 100vw, 751px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<h3 id=\"4-스프링-빈-의존관계-설정---완료\" style=\"position:relative;\"><a href=\"#4-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84-%EC%84%A4%EC%A0%95---%EC%99%84%EB%A3%8C\" aria-label=\"4 스프링 빈 의존관계 설정   완료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 스프링 빈 의존관계 설정 - 완료</h3>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 752px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACLElEQVQoz22SzU8TURTF518xttW209J2WvpFobSIpYhAlIUmulMX7ExcaqIRCKxZ8aFuXCBxAcQFRBe0IYALDDGxooCiiQoV6DCdtgyWn49JJGh8ycl5777cm3POe9Lq6irvcjlWVlbY3t5G3dujoKom/4FhGBgHBnpJp7JfYXNrk5zZ8561T2tmvVQumZCudLXRWB8l2XSOdDrFpfYUnW0p0s3NnE8micdiLL5epFwqg8ExipqOVtTN/eH+IVShpIqBTck4TrsV2SXjcLlxCq5xu6gXaHA5cVgtZDIZU9mD6ft0jLTT/byb/I911K0v3J66Q9fjy1x/eo2JpQmki+kEQZ9MQyRMUyxCazxCbTCA32FHcTo4ZbORzWbNgeNvxumb6WVkYZRCcQft2wZPJvsYeNnPYHaQhY8LSI2JBDbRFI7UE4unqDtiobLurA1ZdmIVd0cKq7+Ep5OroArs/F07AOlCSyOKR8YfCCBHkyiREK1hL52BGhzCtsVqNRWW98vce3GXjtFObj26yoeNHKrIr//VAO3Dbdwcu8Hy52WkllQSt2zH6/HgUQK4owkUxYvH6xEKZSwnLD9bGqN3poeh+WG+qj/Z1Q+YfDtFz/RDhueHWP++jpRujuN1ibwUP4pfISQURkM+XML2Gbud0xYLs5lZqtV/LP9nGRVDDEy3ovi8BIO1BENhwUHxKCEzgiPUCOVzc3Poui5iK4h/qZrQNM3E8bmokc/n+Q0kOvQJk6QWNgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4\" title=\"4\" src=\"/static/bc4990f2e5ea6dced7a6438621b0e391/442cb/4.png\" srcset=\"/static/bc4990f2e5ea6dced7a6438621b0e391/5a46d/4.png 300w,\n/static/bc4990f2e5ea6dced7a6438621b0e391/0a47e/4.png 600w,\n/static/bc4990f2e5ea6dced7a6438621b0e391/442cb/4.png 752w\" sizes=\"(max-width: 752px) 100vw, 752px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<p>스프링 컨테이너는 설정 정보를 참고해서 DI를 진행한다.</p>\n<h1 id=\"스프링-빈-조회---상속관계\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EC%83%81%EC%86%8D%EA%B4%80%EA%B3%84\" aria-label=\"스프링 빈 조회   상속관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 빈 조회 - 상속관계</h1>\n<p>위에 예제에서 보면 알 수 있듯이 스프링 컨테이너에 등록된 빈을 조회하기 위해서는 getBean메서드를 사용했다.</p>\n<p>스프링 빈을 조회할때도 일반 클래스와 마찬가지로 상속관계가 존재한다. 따라서 모든 자바 객체의 최고 부모인 <code class=\"language-text\">Object</code> 타입으로 조회하면, 모든 스프링 빈을 조회한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppicationContextExtendsFindTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">AnnotationConfigApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 조회시, 자식이 둘 이상 있으면, 중복 오류가 발생한다.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByParentTypeDuplication</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">NoUniqueBeanDefinitionException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 조회시, 자식이 둘 이상 있으면, 빈 이름을 지정하면 된다.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByParentTypeBeanName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token class-name\">DiscountPolicy</span> rateDiscoundPolicy <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rateDiscountPolicy\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>rateDiscoundPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"특정 하위 타입으로 조회\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanBySubType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">RateDiscountPolicy</span> bean <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>bean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 모두 조회하기\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findAllBeanByParentType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//given</span>\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">></span></span> beansOfType <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeansOfType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key <span class=\"token operator\">:</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">keySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key = \"</span> <span class=\"token operator\">+</span> key <span class=\"token operator\">+</span> <span class=\"token string\">\" value = \"</span> <span class=\"token operator\">+</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 모두 조회하기 - Object\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findAllBeanByObjectType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> beansOfType <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeansOfType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key <span class=\"token operator\">:</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">keySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key = \"</span> <span class=\"token operator\">+</span> key <span class=\"token operator\">+</span> <span class=\"token string\">\" value = \"</span> <span class=\"token operator\">+</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Configuration</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestConfig</span><span class=\"token punctuation\">{</span>\n        <span class=\"token annotation punctuation\">@Bean</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">rateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token annotation punctuation\">@Bean</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">fixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 예시는 상속관계에 대한 스프링 빈 조회 관련 테스트들을 모아둔 것이다. 크게 보면 부모 타입으로 조회하면 자식 타입들이 모두 선택되고, 따라서 자식이 둘 이상 존재하면 단일 부모타입 조회 시 Exception이 발생한다는 것이다.</p>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reference</h1>\n<ul>\n<li>김영한, Spring 기본편</li>\n</ul>","frontmatter":{"title":"Spring Contaner 와 Spring Bean","date":"August 29, 2022"}}},"pageContext":{"slug":"/Spring/SpringContainer/","previous":{"fields":{"slug":"/PS/투포인터/20922/"},"frontmatter":{"title":"백준 20922번 JAVA : 겹치는건 싫어"}},"next":{"fields":{"slug":"/PS/BFS/3055/"},"frontmatter":{"title":"백준 3055번 JAVA : 탈출"}}}}}