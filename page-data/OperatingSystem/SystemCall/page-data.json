{"componentChunkName":"component---src-templates-blog-post-js","path":"/OperatingSystem/SystemCall/","result":{"data":{"site":{"siteMetadata":{"title":"Gomster","author":"Gomster","siteUrl":"https://gomster96.github.io","comment":{"disqusShortName":"","utterances":"gomster96/gomster96.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"db2076ee-3f52-50aa-9675-5c8d1ab01d1b","excerpt":"System Call 이란? System call 이란 OS를 사용하기위한 일종의 interface이다.  through interrupt 라고 불린다. 즉 interrup를 사용하여 OS kernel을 사용할 수 있도록 하는 함수이다. user-mode 에서 kernel 모드를 안전하게 사용할 수 있도록 한다. 직접적으로 kernel의 system call을 사용하는 것보다는 주로 Application Programming Interface(API)를 통해 접근할 수 있도록 한다. System…","html":"<h1 id=\"system-call-이란\" style=\"position:relative;\"><a href=\"#system-call-%EC%9D%B4%EB%9E%80\" aria-label=\"system call 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System Call 이란?</h1>\n<ul>\n<li>System call 이란 OS를 사용하기위한 일종의 interface이다.</li>\n<li><code class=\"language-text\">Function calls to OS kernel available</code> through interrupt 라고 불린다. 즉 interrup를 사용하여 OS kernel을 사용할 수 있도록 하는 함수이다.</li>\n<li>user-mode 에서 kernel 모드를 안전하게 사용할 수 있도록 한다.</li>\n<li>직접적으로 kernel의 system call을 사용하는 것보다는 주로 Application Programming Interface(API)를 통해 접근할 수 있도록 한다.</li>\n</ul>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 24.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbklEQVQY002Q22tSAQDGz1/TW489Fb0Ee+uiPgzZw8ou0IvRjG3BaEgLGsVGjPVSaYS542EDGa4wxakNFQnGMUXTLuo5iWbezbytXwehywcf3/fywcdP8Ly3sZd8TvTza/6o3Rvj9Cs4fApiQNVS5aVfyzcKL7xFKo0B/6tQ+8mPwXjShcuOE1wXTzPvPk/nYxZyGcLRLxw3BTi7GOXK/XcYlyNcuhdHvxTj2IyP3beqNh0xHvaR4iV0mzK3pCzN3ghhI2jBFrGyvn+TTOyAatDPti+N3uIlvqRHXr1IYmMO+eE1klYdszecPPVkqVWKZD/lmXOmsEg5TPYUoQ8NBLN0hgXt3W23AaWk0u828cS+MnV1B+XOKaprFyg/mqb84Bz1lZMYTZs8eZWn3/lOq1HHFlYwPJYxOzNUWgOEZ9o7e/SuxtH+l0m1OWRdTLMlBnFJIURxf2KXGGDNIZP/9o/h+OgXvsMCiZxKr9vmN/DEP5cOvmH5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1\" title=\"1\" src=\"/static/59c811b5e1af49bb90b2bd6d323d0722/c1b63/1.png\" srcset=\"/static/59c811b5e1af49bb90b2bd6d323d0722/5a46d/1.png 300w,\n/static/59c811b5e1af49bb90b2bd6d323d0722/0a47e/1.png 600w,\n/static/59c811b5e1af49bb90b2bd6d323d0722/c1b63/1.png 1200w,\n/static/59c811b5e1af49bb90b2bd6d323d0722/fbf76/1.png 1252w\" sizes=\"(max-width: 1200px) 100vw, 1200px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<h2 id=\"system-call-과-dual-mode-operation\" style=\"position:relative;\"><a href=\"#system-call-%EA%B3%BC-dual-mode-operation\" aria-label=\"system call 과 dual mode operation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System Call 과 Dual-mode operation</h2>\n<p>System call 을 잘 이해하려면 Dual-mode operation에 대해 알아야한다. Dure mode operation 이란 사용하는 mode를 user mode와 kernel mode로 나누어서 kernel을 사용하는데에 제한을 두는 것을 말한다.</p>\n<p>mode bit 를 사용하여 user mode와 kernel mode를 변경해가며 사용된다.</p>\n<h3 id=\"user-mode\" style=\"position:relative;\"><a href=\"#user-mode\" aria-label=\"user mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User mode</h3>\n<ul>\n<li>user defined code가 작동하는 공간이다.</li>\n<li>Privileged instruction 은 제한된다. 하지만 Privileged instruction은 OS System call을 통해 사용할 수 있다.</li>\n</ul>\n<h3 id=\"kernel-mode\" style=\"position:relative;\"><a href=\"#kernel-mode\" aria-label=\"kernel mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kernel mode</h3>\n<ul>\n<li>OS code 이다.</li>\n<li>Privileged instruction 이 허용된다.</li>\n</ul>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABXElEQVQoz4WQbY+aQBSF+f9/pm2a9GOtVncrLAhYFxGVFwUGN6amK6x10Wcv44c2aZNO8uTMnHPvzcwYSZqRZRs2my1FWVIUQqlu+h/yoqCqdvy5jM+9Pr0vA4ajeyx7gvXgMLZsrZbtaH0Q33ZcraZknXa1pmQT15fhhaaua4z1asV2IzfMMpI4ZrVcYpoW8XpNl2VpQhRF+P6URRiSJjGJ0GVdTyhenucopTgejxiWN2PyGOIGEZ7gBguNH8pg7zumO8WbL3Fmc6m7+YNvppxvPdMw4nK5/H7yp0DRT39yV70yKn8JZ0bqrPcfvZh39oJhceK+arkT/4Oz4r32XhiqV8yyYb/fczgcaJoGo1+2jKoLw79o6eVnxmvFY7xllipmouNlzkC1Mqzla3VlrE7E8lUd3WBjomr8XfNvnk4Eu2ci9YOF0Om8epbsRedu1RA81bRtq597vV55A8/g+ekDg2mGAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2\" title=\"2\" src=\"/static/a0593c747ff9b7ff65e517e9aca8ecac/c1b63/2.png\" srcset=\"/static/a0593c747ff9b7ff65e517e9aca8ecac/5a46d/2.png 300w,\n/static/a0593c747ff9b7ff65e517e9aca8ecac/0a47e/2.png 600w,\n/static/a0593c747ff9b7ff65e517e9aca8ecac/c1b63/2.png 1200w,\n/static/a0593c747ff9b7ff65e517e9aca8ecac/d7e70/2.png 1286w\" sizes=\"(max-width: 1200px) 100vw, 1200px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<h1 id=\"system-call-의-예\" style=\"position:relative;\"><a href=\"#system-call-%EC%9D%98-%EC%98%88\" aria-label=\"system call 의 예 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System call 의 예</h1>\n<h2 id=\"file-descriptor\" style=\"position:relative;\"><a href=\"#file-descriptor\" aria-label=\"file descriptor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>File Descriptor</h2>\n<p>관련 함수들에 대해 들어가기 전에 File Descriptor에 대해 알아야한다.</p>\n<p>File Descriptor란 리눅스 계열의 시스템에서 프로세스(process)가 파일(file)을 다룰 때 사용하는 개념으로, 프로세스에서 특정 파일에 접근할 때 사용하는 추상적인 값이다.</p>\n<p>파일디스크립터에서 0번에서 2번까지는 고정되어있다.</p>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZklEQVQoz3WRi46CMBBF+f+PMxqjcWNWgdKWVqDQAiI+7k7HdeNuspPc9DEzJ3faxLkOaSaQ5RK2alDVDrmQaH0PbWivWhSqoXzBNUIoymuUlnLSIROG649ZgarxSCJASE3NJ6iywjG32H9KlKeWiiR2+wwf+xRSG+jyRLIEqwlWIiWYobqSeqW2cG1AMgwjxvMFl3lG0/bkyEFZD2U6FJLc5DlNkKPzAdNlxnm68GpshJeY5ucd6zwhCaGHDwOG8cyWI1CWHWo3UINhGD9B5zFS0zBObMCcKprKcl8gU6F/MhJQ3G43VowQAuq6IdVwzqFtW1ZVVXx+v4/r/X7H4/H4UdL3PXa7HTabDYpCfKuA1po+QEDS/nBMyXFHzTfMNOL1emVFExHyHkl0tN1usVwukaYpQ6KstQyNcCFyGrHBf/HLofce6/Uaq9UKi8UCh8OBwUopGGP4U/IsY5fxrf8CXg5f6xchRl1DcBC1SwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3\" title=\"3\" src=\"/static/36184635fc33dc7b0a432febace50042/c1b63/3.png\" srcset=\"/static/36184635fc33dc7b0a432febace50042/5a46d/3.png 300w,\n/static/36184635fc33dc7b0a432febace50042/0a47e/3.png 600w,\n/static/36184635fc33dc7b0a432febace50042/c1b63/3.png 1200w,\n/static/36184635fc33dc7b0a432febace50042/e4611/3.png 1298w\" sizes=\"(max-width: 1200px) 100vw, 1200px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<p>파일 discriptior가 int인 이유는 프로세스가 유지하고 있는 file descriptors 테이블의 인덱스이기 때문이다.</p>\n<p>따라서 프로세스가 실행 중에 파일을 Open 하면 커널은 해당 프로세스의 파일 디스크립터 숫자 중에 사용하지 않는 가장 작은 값을 할당해준다. (즉 프로세스마다 파일 디스크립터 숫자들이 있다.)</p>\n<p>프로세스가 열려있는 파일에 시스템 콜을 사용하여 접근할 때, 파일 디스크립터 값을 이용해 파일을 지칭할 수 있다.</p>\n<h2 id=\"open\" style=\"position:relative;\"><a href=\"#open\" aria-label=\"open permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>open()</h2>\n<ul>\n<li>open 함수는 말 그대로 파일을 여는 기능을 한다.</li>\n<li>만약 파일이 존재하지 않다면 선택적으로 파일을 생성할 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;fcntl.h></span></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> pathname<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> flags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> pathname<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> flags<span class=\"token punctuation\">,</span> <span class=\"token class-name\">mode_t</span> mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"open의-return-value\" style=\"position:relative;\"><a href=\"#open%EC%9D%98-return-value\" aria-label=\"open의 return value permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>open()의 Return value</h3>\n<ul>\n<li>Success : file descriptor(non negative integer)</li>\n<li>Error : -1</li>\n</ul>\n<h3 id=\"open의-flags\" style=\"position:relative;\"><a href=\"#open%EC%9D%98-flags\" aria-label=\"open의 flags permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>open()의 flags</h3>\n<ul>\n<li>\n<p>다음 중 하나의 access mode를 포함해야한다. 또한 이 옵션들은 OR연산으로 같이 사용할 수 있다.</p>\n<ul>\n<li>O_RDONLY : 읽기 전용 모드로 파일을 연다.</li>\n<li>O_WRONLY : 쓰기 전용 모드로 파일을 연다</li>\n<li>O_RDWR - 읽기, 쓰기 겸용 모드로 파일을 연다.</li>\n<li>O_CRATE : 필요한 경우 파일을 생성한다.</li>\n<li>O_TRUNC : 존재하던 데이터를 모두 삭제한다.</li>\n<li>O_APPEND : 존재하던 데이터를 보존하고 뒤에 이어서 저장한다.</li>\n<li>O_DIRECTORY : pathname이 directory가 아니면 오류가 발생한다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">fd <span class=\"token operator\">=</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data.txt\"</span><span class=\"token punctuation\">,</span> O_RDONLY <span class=\"token operator\">|</span> O_TRUNC <span class=\"token operator\">|</span> O_CREATE<span class=\"token punctuation\">,</span> <span class=\"token number\">0644</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fd <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"open() Error\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>0644 : 소유자는 읽기/쓰기가 가능하며, 나머지 모든 사람은 읽기만 가능</p>\n<h3 id=\"open의-mode\" style=\"position:relative;\"><a href=\"#open%EC%9D%98-mode\" aria-label=\"open의 mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>open()의 mode</h3>\n<p>mode는 file permition을 지칭한다.</p>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3ElEQVQoz32S20/UQBSH+2eaaPDyaNSISmIi3qIPGgwICTE8KhhXeVBckPVBwURfSHZNNOFFWMFll967nU6nlyn788zsujFSt8nJmZ7pfP1OT42YF3CdDIGfw7YyuHYGFkpd89yMaqleO3Y/wsHeYSeBS/t/zlpmChEXMEQi0Q3pQUYAP4EXJOCxpPscUSQR05pzCRblOkRSQIgCEZNI0yPaL4ZZyh6M5Q/fcHPhPSYXarg0vYLzU6/x5fseunGGthdRJkMmYAZc55Dqoy5j8V0dl2fe6hi7U8HJWy/wsb4LuyuwZ4UEirHTCeCxRB/o9Xojw1hab2D8cRVXZ1dx9t4rjN19iQ0FDBPs2wwdj2twGbDUUAGv/A0ky81GExYZthyGAyfCTzNEnOalwH/hxlKtgYm5NVybW8UZbVjRLbfJrEWwA7cPTPPimE2ZZd9wtorxmerQUAGdQcu/KPYthjjJkcsjcMqRyIYvKDVU7ao4d38Zp+kbfvraBE8lTJ+jSXbK1qLhKPAh1fwoOfYJhsCna3VcfLSCC1NvcOp2BScmn2vDUOR6IAqoIAr6ox2AiWx0y9XP23i4uIkHzzZw40kN1+fXsbXdQkSt2WSlBmP6sQaq9tngP/zfUH4DOSMf61z38ygAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4\" title=\"4\" src=\"/static/c12aaabd22e47d1df7a9a567a8abd358/c1b63/4.png\" srcset=\"/static/c12aaabd22e47d1df7a9a567a8abd358/5a46d/4.png 300w,\n/static/c12aaabd22e47d1df7a9a567a8abd358/0a47e/4.png 600w,\n/static/c12aaabd22e47d1df7a9a567a8abd358/c1b63/4.png 1200w,\n/static/c12aaabd22e47d1df7a9a567a8abd358/89048/4.png 1242w\" sizes=\"(max-width: 1200px) 100vw, 1200px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<h2 id=\"read\" style=\"position:relative;\"><a href=\"#read\" aria-label=\"read permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>read()</h2>\n<p>read() 함수는 file descriptor로부터 파일을 읽는데 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token class-name\">ssize_t</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> fd<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>buf<span class=\"token punctuation\">,</span> <span class=\"token class-name\">size_t</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>count bytes만큼 fd에서 파일을 읽는다.</li>\n<li>read 함수를 사용할 때 읽을 파일의 위치 즉 file pointer를 이동시키려면 lseek함수를 사용해야한다.</li>\n</ul>\n<h3 id=\"read의-return-value\" style=\"position:relative;\"><a href=\"#read%EC%9D%98-return-value\" aria-label=\"read의 return value permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>read()의 return value</h3>\n<ul>\n<li>Success : 파일에서 읽은 바이트의 수를 리턴한다.</li>\n<li>Fail : -1</li>\n</ul>\n<h2 id=\"write\" style=\"position:relative;\"><a href=\"#write\" aria-label=\"write permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>write()</h2>\n<p>write 함수는 fd에 파일을 값을 쓰는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token class-name\">ssize_t</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> fd<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>buf<span class=\"token punctuation\">,</span> <span class=\"token class-name\">size_t</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>count bytes 만큼 buffer에 있는 값을 파일을 write한다.</p>\n<h3 id=\"return-value\" style=\"position:relative;\"><a href=\"#return-value\" aria-label=\"return value permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Return value</h3>\n<ul>\n<li>Success : write한 bytes의 수를 리턴한다.</li>\n<li>Fail : -1</li>\n</ul>\n<h1 id=\"system-call-함수-사용-예시\" style=\"position:relative;\"><a href=\"#system-call-%ED%95%A8%EC%88%98-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C\" aria-label=\"system call 함수 사용 예시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System call 함수 사용 예시</h1>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;fcntl.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">FILELEN</span> <span class=\"token expression\"><span class=\"token number\">256</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">BUFSIZE</span> <span class=\"token expression\"><span class=\"token number\">1024</span></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>argv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> fd<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> start_offset<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> read_bytes<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">char</span> filename<span class=\"token punctuation\">[</span>FILELEN<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">char</span> buf<span class=\"token punctuation\">[</span>BUFSIZE<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>argc <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fprintf</span><span class=\"token punctuation\">(</span><span class=\"token constant\">stderr</span> <span class=\"token punctuation\">,</span><span class=\"token string\">\"Usage: %s [file name] [start offset] \\n\"</span><span class=\"token punctuation\">,</span> argv<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">strcpy</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">,</span> argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// set file name</span>\n    start_offset <span class=\"token operator\">=</span> <span class=\"token function\">atoi</span><span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// set start offset</span>\n\n    <span class=\"token comment\">// open source file</span>\n    fd <span class=\"token operator\">=</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">,</span> O_RDONLY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">perror</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// set file position</span>\n    <span class=\"token function\">lseek</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> start_offset<span class=\"token punctuation\">,</span> <span class=\"token constant\">SEEK_SET</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// read data from file</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>read_bytes <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">,</span> BUFSIZE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// print file data</span>\n        <span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">,</span> read_bytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// close file</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"System Call","date":"March 18, 2022"}}},"pageContext":{"slug":"/OperatingSystem/SystemCall/","previous":{"fields":{"slug":"/OODP/TemplateMethod/"},"frontmatter":{"title":"템플릿 메서드 패턴 (Template Method pattern)"}},"next":null}}}