{"componentChunkName":"component---src-templates-blog-post-js","path":"/Infra/docker/","result":{"data":{"site":{"siteMetadata":{"title":"Gomster","author":"Gomster","siteUrl":"https://gomster96.github.io","comment":{"disqusShortName":"","utterances":"gomster96/gomster96.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"e9a86915-5824-5f6b-b7d8-e5d82c7c1d59","excerpt":"도커(Docker)란? 도커는 컨테이너 기반의 오픈소스 가상화 플랫폼이다. 이렇게 말하면 너무 추상적이니 먼저 몇가지 개념에 대해서 언급한 뒤 도커에 대해서 다시 재정의 하도록 하겠다. 컨테이너(Container) 소프트웨어는 OS와 라이브러리에 의존성을 가지고 있다. 따라서 하나의 컴퓨터에서 성격이 다른(OS, 라이브러리 버전이 다른) 소프트웨어를 한번에 실행할 때 어려움을 가질 수 있고 관련된 구성을 관리하기가 어렵다. 따라서 기존의 가상화 방식은 주로 OS…","html":"<h1 id=\"도커docker란\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4docker%EB%9E%80\" aria-label=\"도커docker란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도커(Docker)란?</h1>\n<p>도커는 <strong>컨테이너 기반의 오픈소스 가상화 플랫폼</strong>이다.</p>\n<p>이렇게 말하면 너무 추상적이니 먼저 몇가지 개념에 대해서 언급한 뒤 도커에 대해서 다시 재정의 하도록 하겠다.</p>\n<h2 id=\"컨테이너container\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88container\" aria-label=\"컨테이너container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨테이너(Container)</h2>\n<p>소프트웨어는 OS와 라이브러리에 의존성을 가지고 있다. 따라서 하나의 컴퓨터에서 성격이 다른(OS, 라이브러리 버전이 다른) 소프트웨어를 한번에 실행할 때 어려움을 가질 수 있고 관련된 구성을 관리하기가 어렵다. 따라서 <strong>기존의 가상화 방식은 주로 OS를 가상화</strong> 하는 방법을 택했다. 하지만 OS를 가상화하는 것은 사용은 간단하지만 굉장히 무겁고, 느리기에 운영환경에선 사용할 수 없다.</p>\n<p>따라서 컨테이너가 등장하였다. 컨테이너는 개별 Software의 실행에 필요한 <strong>실행환경을 독립적으로 운용할 수 있도록 기반환경</strong> 또는 다른 실행환경과의 간섭을 막고 실행의 독립성을 확보해주기 위해 프로세스를 격리 하는 방식이다.</p>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 67.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAC70lEQVQ4y3WT/U9TVxjH+Zv0H1DDfjA6Y3wJOETdFnROmCbEjSDM0L3gshFQ0UwxKo4g7iVTQiDTqVCgld6W5haKAr19gbaU0nupte+l/XjuNeD7Nzl5zrnnuZ/znG/OU4ZQsVRirVg0YmFtjWg0Si6XFTslSqWiMXSVxL6uNZGjaRqqqlIoFFiXPi9bT3pTfl+AbLbw1reSAX8NVBQFWZZJJpNvA/WJV41hDfhxhoJYFxaIaEHScYXo0lNWY3Nk4n6daACN8U4B6wdtAO8rHlpHR7jmkPjJbOaxe5Sg5mZi1sJMRCYWc713C0ERFhnnbByg21UmsDjd0wxYLTyyS/RbrUzJY/hnJaZdFp49k1A9NkqZDDnhcyafJ1PIkxM/FwsZQUkLD7JGLOSzwsPYCn5xXbvuideLpHhZDPtIxEOo0QCqFiK1+JT0coTe6Sm6HXZ6nA66JAmPb5zA4hPcc2YCIRtJ1SMqFP55l5exhcO4RJR8fhaDHuLqAkurYaKpKGnNT3plmb/dLvqcEn/Kdv5w2PAFBTQyg8sv41PnRJ7yCqgEg4zOzTPhUZiwO5i3mllyjhMOzxOOKKwuzJBaidLtnqVrcoobsptOxxRW4fGw/JhHzmHGZsaIrejAVY3JSZnb94b4Z/B/BofHeWiR+M9s4d/BB9wZuI91ZJSEqrHfmWHTcJzdtgRVjgQHpDjVkwnKnyTYPPKce6G0AL5IMHK3n/O/tPF7+0W6L1/lr+u3uHnpirG+8GsHQz29JIUdR851Un6ymZ2nTVT/0M7nrRfZ29jK9voWttQ1MSgKMZ7N5Ru32Lqnkl2HvqTi6Am+/q6JymO1xrp832f82H5BdE6OI7Un+WRvBdsrDlJ9vI6aU/V8WnWYHZUH2bZ7H0MPHr4C9vUP8EV9A980t1Bv+hlTR6cR65paqDndSFfvHeONnf2tg68avqf2TAuN59o423Ze5JioazZR8+0ZxiakD7feu8qL6lKp1EZPf0z6/kvTaH5g8e8+8AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1\" title=\"1\" src=\"/static/e00a47eb75d0eadcaaccfad5eb89d416/a6d36/1.png\" srcset=\"/static/e00a47eb75d0eadcaaccfad5eb89d416/5a46d/1.png 300w,\n/static/e00a47eb75d0eadcaaccfad5eb89d416/0a47e/1.png 600w,\n/static/e00a47eb75d0eadcaaccfad5eb89d416/a6d36/1.png 650w\" sizes=\"(max-width: 650px) 100vw, 650px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n&#xAE30;&#xC874;&#xC758; &#xAC00;&#xC0C1;&#xBA38;&#xC2E0;&#xACFC;&#xB294; &#xB2EC;&#xB9AC; CPU&#xB098; &#xBA54;&#xBAA8;&#xB9AC;&#xB97C; &#xB531; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; &#xD544;&#xC694;&#xD55C; &#xB9CC;&#xD07C;&#xB9CC; &#xCD94;&#xAC00;&#xB85C; &#xC0AC;&#xC6A9;&#xD558;&#xACE0; &#xC131;&#xB2A5;&#xC801;&#xC73C;&#xB85C;&#xB3C4; &#xAC70;&#xC758; &#xC190;&#xC2E4;&#xC774; &#xC5C6;&#xAE30; &#xB54C;&#xBB38;&#xC5D0; &#xB9E4;&#xC6B0; &#xD3B8;&#xB9AC;&#xD55C; &#xAE30;&#xB2A5;&#xC774;&#xB2E4;.\n<h2 id=\"이미지image\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80image\" aria-label=\"이미지image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지(Image)</h2>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 651px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACZUlEQVQoz01Ty27TUBT0j/AP/AASS/4CiV9gyQ4WCDaA1BULEJsuEJVIUYsqpIoqiwpFgfAoVXGaNE2bOIkdO7avfX0fHs65bqoe6SSxfTJ35szYq+sapayQiQI5tShK91sbg7qqYEQOW4jrNtx0j7suBVAWgCzcs1preIb+yAAgYFsDmj4qeiCyDJrBGPi6NegGaNh1pTQyqVBWCkYpd4jHTCQxEcpgEc2QRBOkuUCZp1gXq+DmMsZilRco0wSfTma4tz3G7Rf7GM5iYlM1gCxTVBphHEEXMay1aB928HzjLfpnYyg6XRNrTey+Hnbx4OFj/Ds9A3Nt/TzDm/Zfx7Im+R6fmqQZ5mGEKE4wXdB3kuB0eI7NrR2ML6eI0xzDSQARDoh9TrMxFKm6SCU6gcDvSYziJqDWBsEiRLiMEcwXBLzCzfJ9HxfzkKRmELSnpjT2/Dnufhji1pNdDAKWLOGxvFJK9sQBK23ceKd3hEdPN9D9dYTJ5QWCKEZETAsCfPe+hdebH2nKYjYLMArmzX7Jac8QYJrlWKUpJLnGBina1/GJj529fVpHw0hStJJVY9TBtx/Yan1GexTh5Z8czw76mCU0V5XwmFkYLfG918M0yZzkMAqRxstryZaGFJlXkBJ75TZX93KJ+9snuPPqC6ZxBijZ5JBdbiJhnMMVuVqIJsBW07LpmkPLGeQ8usxR0wVUllBeCYwy6nLIQPNwiWN/AH8wopicUyRGTnZNYLaS7o1hQEOs5bCPcuDDrBJYBuXmOfaBDvPWwbW2dux4p/y9Lr7m/aYZOyzcG1XTvbXw+qrX9R9l243PPWqVXAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2\" title=\"2\" src=\"/static/aa1e4c27a0714e30c8bc6e595d3a8230/1ac66/2.png\" srcset=\"/static/aa1e4c27a0714e30c8bc6e595d3a8230/5a46d/2.png 300w,\n/static/aa1e4c27a0714e30c8bc6e595d3a8230/0a47e/2.png 600w,\n/static/aa1e4c27a0714e30c8bc6e595d3a8230/1ac66/2.png 651w\" sizes=\"(max-width: 651px) 100vw, 651px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<p>이미지는 <strong>컨테이너 실행에 필요한 파일과 설정값 등을 포함</strong>하고 있는 것으로 상태값을 가지지 않고 변하지 않는다.</p>\n<p>따라서 같은 이미지로 여러개의 컨테이너를 생성할 수 있고, 해당 이미지로 만든 컨테이너가 삭제된다고 하더라도, 이미지는 사라지지 않는다.</p>\n<p>도커 이미지는 <a href=\"https://hub.docker.com/\">DockerHub</a>에서 등록 할 수도 있고, 존재하는 이미지를 가지고와서 사용할 수도 있따.</p>\n<h2 id=\"다시-도커란\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%8B%9C-%EB%8F%84%EC%BB%A4%EB%9E%80\" aria-label=\"다시 도커란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다시 도커란?</h2>\n<p>다시 도커는 <strong>컨테이너 기반의 오픈소스 가상화 플랫폼</strong>이다. 즉 도커란 사용하고 싶은 오픈소스 라이브러리의 이미지를 사용하여 컨테이너를 통해 가상화 하여 사용하도록 하는 플랫폼이다.</p>\n<ul>\n<li>도커를 사용하여 하나의 서버에서 여러개의 라이브러리 또는 여러 버전의 라이브러리를 사용할 수 있다.</li>\n<li>서버세팅을 할 때 매 서버마다 똑같은 파일을 설치하는 것이 아닌, 이미지 파일을 통해서 한번에 동일한 서버세팅을 할 수 있다.</li>\n</ul>\n<h1 id=\"도커-사용-예시-spring-mysql\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-spring-mysql\" aria-label=\"도커 사용 예시 spring mysql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도커 사용 예시 (Spring, MySQL)</h1>\n<h2 id=\"dockerfile\" style=\"position:relative;\"><a href=\"#dockerfile\" aria-label=\"dockerfile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dockerfile</h2>\n<p>도커 이미지를 만들 디렉토리에서 <code class=\"language-text\">Dockerfile</code> 이라는 이름의 파일을 만들어서 이미지 파일을 만들 수 있다.</p>\n<p>예시 - Spring build 파일 실행을 위한 image 파일</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> openjdk:8-jdk</span>\n<span class=\"token instruction\"><span class=\"token keyword\">VOLUME</span> /tmp</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ARG</span> JAR_FILE=./build/libs/*.jar</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token variable\">${JAR_FILE}</span> test.jar</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENTRYPOINT</span> [<span class=\"token string\">\"java\"</span>,<span class=\"token string\">\"-jar\"</span>,<span class=\"token string\">\"/test.jar\"</span>]</span></code></pre></div>\n<ul>\n<li>FROM : 사용할 base 이미지 파일 선택</li>\n<li>VOLUME : 볼륨경로 지정</li>\n<li>ARG : Build 시점에서 사용하는 변수</li>\n<li>COPY : 해당 파일들을 다음 이름으로 변경</li>\n<li>\n<p>ENTRYPOINT : 해당 파일들로 다음과 같은 명령어 실행</p>\n<ul>\n<li>ex) java -jar test.jar</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"build\" style=\"position:relative;\"><a href=\"#build\" aria-label=\"build permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Build</h3>\n<p>다음과 같이 Docker파일을 만들면 build 명령어를 통하여 image 파일을 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker build &lt;옵션> &lt;Dockerfile 경로></code></pre></div>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 807px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABl0lEQVQ4y32SZ7KCQBCEOYcZAwaSoCDmrPc/UT+/rRpLq3j+GBZ22Z4O4/lJqmFRKcxKzfNCwWikXq8n3/fd2ul0aqvdbtfue1EcahZONU9iRWGoLM8VRZHG47EGg4G7WFf/gXqLxUJJkmg2myl4gQRBoOFwqG63+2ZqbO37F0uPR1VVulwu2m63mkwmjiHfVsfjUev1Wsvl0jFvNptqtVpv0E9gr9FoaLVa6fl8ugsAwvh+v+t0On2BXq9XlWWp8GUNVcsQaTB8PB6OIb4h/3w+O5DdbufAec9f/hZFoTiONXqF9xMQhvv9XmmaCl8BARSWrLfbTYfDwf2LChrXpkwXALjEyiYMkAcIhWSAkQlQv993AeGl+WleehxsNhvHiJUUuWgMP2Va2oAyCQRk42XT4BgCBAsuYwGAgMHSJHOOz9hCMASZZZlTZXPLyDmGMAAEMIqUkWosaQgQ/vHOShEe4VhASHcMOYQJHekCoHkIwHQ6dQ2RzRnBAWLDz/qVMhJIkB+ZSy6bVPZNJvJgRQN8+wzDRugPbiKJSOTbZZAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3\" title=\"3\" src=\"/static/7fcb7555e631d7e8df35f42be06c9a69/d2a60/3.png\" srcset=\"/static/7fcb7555e631d7e8df35f42be06c9a69/5a46d/3.png 300w,\n/static/7fcb7555e631d7e8df35f42be06c9a69/0a47e/3.png 600w,\n/static/7fcb7555e631d7e8df35f42be06c9a69/d2a60/3.png 807w\" sizes=\"(max-width: 807px) 100vw, 807px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></p>\n<p>—help를 통해 build를 위한 옵션을 찾을 수 있다.</p>\n<p>-t의 경우 이미지파일의 이름과 태그의 이름을 지정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker build -t image_name:image_tag_name &lt;Dockerfile 경로></code></pre></div>\n<p>생성한 이미지는 docker images 명령어를 통해 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker images -a</code></pre></div>\n<h3 id=\"run\" style=\"position:relative;\"><a href=\"#run\" aria-label=\"run permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>run</h3>\n<p>생성한 Docker 이미지는 run 명령어를 통해 실행할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run (&lt;옵션>) &lt;이미지 식별자> (&lt;명령어>) (&lt;인자>)</code></pre></div>\n<p>따라서 위에 예시처럼 도커파일을 실행하려면 다음과 같이 적으면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run image_name:image_tag_name</code></pre></div>\n<p>또한 docker ps 명령어로 현재 컨테이너들을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker ps -a</code></pre></div>\n<h3 id=\"run-option\" style=\"position:relative;\"><a href=\"#run-option\" aria-label=\"run option permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>run option</h3>\n<ul>\n<li>-d : 백그라운드 모드로 컨테이너가 실행되고 실행결과로 컨테이너 ID만을 출력한다.</li>\n<li>-it : 컨테이너를 종료하지 않은 채로 터미널에 입력을 계속해서 컨테이너로 전달해야할 때 사용한다.</li>\n<li>—rm : 컨테이너를 일회성으로 실행할 때 주로 쓰인다. 컨테이너가 종료될 때 컨테이너와 관련된 리소스(파일시스템, 볼륨)까지 깨끗이 제거해준다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run --rm docker_image</code></pre></div>\n<h2 id=\"dockercompose\" style=\"position:relative;\"><a href=\"#dockercompose\" aria-label=\"dockercompose permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DockerCompose</h2>\n<p>Docker를 사용하다 보면 단순히 하나의 라이브러리만이 아니라 여러 라이브러리들을 합쳐서 사용해야할때가 온다. 예를 들어 Spring Boot를 실행함과 동시에 MySQL의 이미지를 설치하여 빌드해야할 때가 있다. 이럴 때 Docker Compose 를 사용한다.</p>\n<p>예시</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.7'</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">database</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> linux/amd64\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> library/mysql<span class=\"token punctuation\">:</span>8.0.26\n    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> db_containser_name\n\n    <span class=\"token key atrule\">cap_add</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> SYS_NICE\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">MYSQL_USER</span><span class=\"token punctuation\">:</span> db_user_name\n      <span class=\"token key atrule\">MYSQL_DATABASE</span><span class=\"token punctuation\">:</span> db_name\n      <span class=\"token key atrule\">MYSQL_PASSWORD</span><span class=\"token punctuation\">:</span> db_user_password\n      <span class=\"token key atrule\">MYSQL_ALLOW_EMPTY_PASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'yes'</span>\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'--character-set-server=utf8mb4'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'--collation-server=utf8mb4_unicode_ci'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'./database/:/var/project/db'</span>\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'3306:3306'</span>\n\n  <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'8080:8080'</span>\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> database\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">SPRING_DATASOURCE_URL</span><span class=\"token punctuation\">:</span> jdbc<span class=\"token punctuation\">:</span>mysql<span class=\"token punctuation\">:</span>//db_containser_name<span class=\"token punctuation\">:</span>3306/db_name<span class=\"token punctuation\">?</span>allowPublicKeyRetrieval=true<span class=\"token important\">&amp;useSSL=false&amp;serverTimezone=UTC&amp;useLegacyDatetimeCode=false</span>\n      <span class=\"token key atrule\">SPRING_DATASOURCE_USERNAME</span><span class=\"token punctuation\">:</span> db_user_name\n      <span class=\"token key atrule\">SPRING_DATASOURCE_PASSWORD</span><span class=\"token punctuation\">:</span> db_user_password</code></pre></div>\n<ul>\n<li>image : 이미지 파일 선택</li>\n<li>contianer_name : 컨테이너 이름 설정</li>\n<li>\n<p>cap_add : 권한 부여하는 것</p>\n<ul>\n<li>root 계정이 아닌 권한을 계정을 검사하는데 계정에 대한 권한 이름 중 하나</li>\n<li>호출 프로세스에 대한 실시간 스케줄링 정책을 설정하고 임의 프로세스에 대한 스케줄링 정책 및 우선순위를 설정한다.</li>\n<li>임의 프로세스에 대한 CPU 선호도를 설정한다.</li>\n<li>임의 프로세스에 대한 I/O 스케줄링 클래스 및 우선순위를 설정한다.</li>\n</ul>\n</li>\n<li>\n<p>port :</p>\n<ul>\n<li>외부접근포트 : 컨테이너 내부 매핑 포트</li>\n</ul>\n</li>\n<li>\n<p>depend_on :</p>\n<ul>\n<li>해당 컨테이너가 실행 된 뒤에 실행된다.</li>\n</ul>\n</li>\n<li>\n<p>restart :</p>\n<ul>\n<li>컨테이너가 종료되면 다시 실행시킨다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<ul>\n<li><a href=\"https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html\">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></li>\n<li><a href=\"https://medium.com/dtevangelist/docker-%EA%B8%B0%EB%B3%B8-5-8-volume%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-data-%EA%B4%80%EB%A6%AC-9a9ac1db978c\">https://medium.com/dtevangelist/docker-기본-5-8-volume을-활용한-data-관리-9a9ac1db978c</a></li>\n<li><a href=\"https://dongle94.github.io/docker/docker-basic-use/\">https://dongle94.github.io/docker/docker-basic-use/</a></li>\n<li><a href=\"https://blog.d0ngd0nge.xyz/docker-dockerfile-write/\">https://blog.d0ngd0nge.xyz/docker-dockerfile-write/</a></li>\n</ul>","frontmatter":{"title":"Docker","date":"July 10, 2022"}}},"pageContext":{"slug":"/Infra/docker/","previous":{"fields":{"slug":"/PS/DP/2073/"},"frontmatter":{"title":"백준 2073번 JAVA : 수도배관 공사"}},"next":{"fields":{"slug":"/FE/1_dothome/post/"},"frontmatter":{"title":"닷홈(dothome)으로 웹 호스팅 하기"}}}}}